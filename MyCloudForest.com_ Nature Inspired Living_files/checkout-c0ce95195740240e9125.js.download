(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2222],{1236:function(e,t,r){"use strict";var n=r(5893),a=r(3574),s=r.n(a),o=r(9862);t.Z=function(e){var t=e.group,r=e.item,a=e.count,c=void 0===a?null:a,i=(0,o.Z)(),l=(i.cart,i.addProduct),u=i.removeProduct;return(0,n.jsxs)("div",{className:"input-group "+s()["input-group"],children:[(0,n.jsx)("button",{onClick:function(e){e.stopPropagation(),u(r,t)},type:"button",className:"btn btn-sm btn-default btn-number minus "+s().minus,"data-type":"minus","data-field":"quant[1]",children:"-"}),(0,n.jsx)("input",{readOnly:!0,type:"text",name:"quant[1]",className:"input-number btn-number "+s()["input-number"],value:c||r.count,min:"0"}),(0,n.jsx)("button",{onClick:function(e){e.stopPropagation(),l(r,t)},type:"button",className:"btn btn-sm btn-default btn-number addition "+s().addition,"data-type":"plus","data-field":"quant[1]",children:"+"})]})}},4645:function(e,t,r){"use strict";var n=r(5893),a=r(3574),s=r.n(a),o=r(9862),c=r(5675),i=r(8191),l=r(1236);t.Z=function(e){var t=e.group,r=e.showNonGroupItems,a=e.showDelivery,u=(0,o.Z)(),d=u.cart,m=(u.addProduct,u.removeProduct,u.getItemTotal),p=u.getProductTotal,h=u.getDeliveryTotal,f=d.items.filter((function(e){return!e.isGroup||!0===e.confirmed}));if(r)f=f.filter((function(e){return!e.isGroup}));else if(t){var x=d.items.find((function(e){return e.name===t}));f=x?x.items:[]}return(0,n.jsx)("div",{className:s().cart,children:(0,n.jsxs)("div",{className:s()["cart-items"],children:[f.map((function(e){return(0,n.jsxs)("div",{className:s().item,children:[(0,n.jsx)("div",{className:s().preview,children:(0,n.jsx)(c.default,{loader:i.S,src:e.image,alt:"",width:"100%",height:"100%",layout:"intrinsic"})}),(0,n.jsxs)("div",{className:s().details,children:[(0,n.jsx)("div",{className:s().itemName,children:e.name}),(0,n.jsxs)("div",{className:s().itemPrice,children:["\u20b9 ",e.isGroup," ",e.isGroup?p(e.name):m(e)]})]}),(0,n.jsx)(l.Z,{item:e,group:t})]},e.key)})),a&&(0,n.jsxs)("p",{className:"small",style:{color:"#A3A3A3"},children:["Delivery and installation: \u20b9 ",h()]})]})})}},9308:function(e,t,r){"use strict";r.d(t,{Z:function(){return l}});var n=r(5893),a=r(6156),s=r(6569),o=r.n(s);function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){(0,a.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function l(e){var t=e.register,r=e.errors,a=e.user,s=e.onSubmit;return(0,n.jsx)("form",{onSubmit:s,style:{"text-align":"center"},children:(0,n.jsx)("div",{className:"row",children:(0,n.jsxs)("div",{className:"col-sm-12",children:[(0,n.jsxs)("div",{className:o()["form-group"],children:[(0,n.jsx)("input",i({className:o()["form-control"],type:"text",placeholder:"Name"},t("name",{required:!0}))),r.name&&(0,n.jsx)("span",{className:"error",children:"Name is required"})]}),(0,n.jsxs)("div",{className:o()["form-group"],children:[(0,n.jsx)("input",i({className:o()["form-control"],type:"email",placeholder:"Email",disabled:!(null===a||void 0===a||!a.email)},t("email",{required:!0,pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i,message:"Enter a valid e-mail address"}}))),r.email&&(0,n.jsx)("span",{className:"error",children:"A valid email is required."})]}),(0,n.jsxs)("div",{className:o()["form-group"],children:[(0,n.jsx)("input",i({className:o()["form-control"],type:"number",placeholder:"Phone"},t("phone",{required:!0}))),r.phone&&(0,n.jsx)("span",{className:"error",children:"Enter a valid phone number."})]}),(0,n.jsxs)("div",{className:o()["form-group"],children:[(0,n.jsx)("input",i({className:o()["form-control"],type:"text",placeholder:"Address"},t("address",{required:!0}))),r.address&&(0,n.jsx)("span",{className:"error",children:"Address is required."})]}),(0,n.jsxs)("div",{className:o()["form-group"],children:[(0,n.jsxs)("select",i(i({className:o()["form-control"],onChange:function(){return console.log("Amal")}},t("city",{required:!0})),{},{children:[(0,n.jsx)("option",{value:"",children:"Select City"}),(0,n.jsx)("option",{value:"Bangalore",children:"Bangalore"}),(0,n.jsx)("option",{value:"New Delhi",children:"New Delhi"})]})),r.city&&(0,n.jsx)("span",{className:"error",children:"City is required."})]}),(0,n.jsxs)("div",{className:o()["form-group"],children:[(0,n.jsxs)("select",i(i({className:o()["form-control"]},t("state",{required:!0})),{},{children:[(0,n.jsx)("option",{value:"",children:"Select State"}),(0,n.jsx)("option",{value:"Karnataka",children:"Karnataka"}),(0,n.jsx)("option",{value:"New Delhi",children:"New Delhi"})]})),r.state&&(0,n.jsx)("span",{className:"error",children:"State is required."})]}),(0,n.jsxs)("div",{className:o()["form-group"],children:[(0,n.jsx)("input",i({className:o()["form-control"],type:"text",placeholder:"PIN Code"},t("pin",{required:!0}))),r.pin&&(0,n.jsx)("span",{className:"error",children:"State is required."})]}),(0,n.jsx)("div",{className:o()["form-group"],children:(0,n.jsx)("input",i({className:o()["form-control"],type:"text",placeholder:"Name of our Designer support"},t("designer")))})]})})})}},6140:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return O}});var n=r(5893),a=r(9187),s=r(5620),o=r(5553),c=r(7757),i=r.n(c),l=r(2137),u=r(3117),d=r.n(u),m=r(466),p=r.n(m),h=r(9862),f=r(5005),x=r(7294),_=r(4645),y=r(1163),v=r(2283),j=r(5269),b=r(9308),g=r(7625),k=r(1436),N=function(e){var t=e.amountToPay,r=e.onPayButtonClicked,a=e.getCartTotal,s=e.getDeliveryTotal;return(0,n.jsxs)("div",{className:d()["final-checkout"],children:[(0,n.jsxs)("div",{className:d()["total-sum"],children:[(0,n.jsxs)("p",{className:d()["delivery-note"],style:{color:"#A3A3A3"},children:["Delivery and installation: \u20b9 ",s()]}),(0,n.jsxs)("p",{style:{"text-transform":"uppercase",color:"#A3A3A3",font:"normal normal normal 20px/24px Montserrat"},children:["Total : \xa0 \u20b9",(0,n.jsx)("span",{style:{font:"normal normal normal 20px/24px Montserrat",color:"#000000"},children:a()})]})]}),(0,n.jsx)(f.Z,{disabled:250!=t&&1e3!=t&&t!=parseInt(a()/2)&&t!=parseInt(.95*a())||0===t,className:"rectangle-button "+d()["paynow-button"],onClick:r,children:250!=t&&1e3!=t&&t!=parseInt(a()/2)&&t!=parseInt(.95*a())||0===t?(0,n.jsx)("span",{children:" Pay Now"}):(0,n.jsxs)("span",{style:{fontWeight:"bold"},children:["Pay ",t,"/-"]})})]})},C=function(){var e=(0,y.useRouter)(),t=(0,h.Z)(),r=t.getCartTotal,a=t.getOrderPayload,s=t.clearCart,o=t.getCartSize,c=t.getDeliveryTotal,u=(0,x.useContext)(j.S),m=u.user,f=u.setUser,C=u.setShowLoginDialog,O=(0,x.useState)(""),w=O[0],P=O[1],S=(0,x.useState)(0),A=S[0],T=S[1],D=(0,v.cI)({defaultValues:m}),I=D.register,q=D.handleSubmit,Z=D.reset,z=D.formState.errors;(0,x.useEffect)((function(){Z(m)}),[m]);var E=function(e){var t=e.target.value;"site_visit"===t?T(250):"3d_visualisation"===t?T(1e3):"half"===t?T(parseInt(r()/2)):"full"===t&&T(parseInt(.95*r())),P(t)};var F=function(){var e=(0,l.Z)(i().mark((function e(t){var r,n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/api/v1/accounts/register/",{method:"POST",body:JSON.stringify(t),headers:{"Content-type":"application/json; charset=UTF-8"}});case 3:if(400!==(r=e.sent).status){e.next=9;break}return alert("This email is already registered. Use the login option."),e.abrupt("return");case 9:if(201!==r.status){e.next=19;break}return e.next=12,r.json();case 12:n=e.sent,localStorage.setItem("cloudforest-refresh-token",n.refresh),localStorage.setItem("cloudforest-access-token",n.access),f({name:n.user.name,email:n.user.email,phone:n.user.phone,address:n.user.address,city:n.user.city,state:n.user.state,pin:n.user.pin}),L(n.user),e.next=20;break;case 19:alert("Could not get a response from the server. Retry later.");case 20:e.next=26;break;case 22:e.prev=22,e.t0=e.catch(0),console.log(e.t0),alert("User with Email already exists");case 26:case"end":return e.stop()}}),e,null,[[0,22]])})));return function(t){return e.apply(this,arguments)}}(),U=function(){var e=(0,l.Z)(i().mark((function e(t){var r,n,a;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=localStorage.getItem("cloudforest-access-token"),e.prev=1,e.next=4,fetch("/api/v1/accounts/update/",{method:"PUT",body:JSON.stringify(t),headers:{"Content-type":"application/json; charset=UTF-8",Authorization:"Bearer ".concat(r)}});case 4:if(400!==(n=e.sent).status){e.next=10;break}return alert("Your profile could not be updated."),e.abrupt("return");case 10:if(200!==n.status){e.next=19;break}return e.next=13,n.json();case 13:(a=e.sent).email=m.email,f(a),L(a),e.next=20;break;case 19:alert("Could not get a response from the server. Retry later.");case 20:e.next=26;break;case 22:e.prev=22,e.t0=e.catch(1),console.log(e.t0),alert("There was a problem updating your profile. Try later.");case 26:case"end":return e.stop()}}),e,null,[[1,22]])})));return function(t){return e.apply(this,arguments)}}(),R=function(){var e=(0,l.Z)(i().mark((function e(t){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:localStorage.getItem("cloudforest-access-token")?U(t):F(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),B=function(){s()};function G(e){return new Promise((function(t){var r=document.createElement("script");r.src=e,r.onload=function(){t(!0)},r.onerror=function(){t(!1)},document.body.appendChild(r)}))}function M(){return(M=(0,l.Z)(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q(R)();case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function L(e){return J.apply(this,arguments)}function J(){return(J=(0,l.Z)(i().mark((function t(n){var s,o,c,u,d,m,p,h,f;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(0!==A){t.next=3;break}return e.push("/payment"),t.abrupt("return");case 3:return t.next=5,G("https://checkout.razorpay.com/v1/checkout.js");case 5:if(t.sent){t.next=9;break}return alert("Razorpay SDK failed to load. Are you online?"),t.abrupt("return");case 9:if(s=localStorage.getItem("cloudforest-access-token")){t.next=13;break}return alert("You need to be logged in."),t.abrupt("return");case 13:return t.prev=13,t.next=16,fetch("/api/v1/orders/start-payment/",{method:"POST",body:JSON.stringify({products:a(),charged_price:A,final_price:r(),payment_type:w}),headers:{"Content-type":"application/json; charset=UTF-8",Authorization:"Bearer ".concat(s)}});case 16:return o=t.sent,t.next=19,o.json();case 19:if(c=t.sent){t.next=23;break}return alert("Server error. Are you online?"),t.abrupt("return");case 23:u=c.payment,d=u.amount,m=u.id,p=u.currency,h=u.razorpay_id,f={key:h,amount:d.toString(),currency:p,name:"MyCloudForest",description:"Transaction",image:"/img/cloud-forest-logo.png",order_id:m,handler:function(){var t=(0,l.Z)(i().mark((function t(r){var n,a;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={razorpay_payment_id:r.razorpay_payment_id,razorpay_order_id:r.razorpay_order_id,razorpay_signature:r.razorpay_signature},t.next=3,fetch("/api/v1/orders/complete-payment/",{method:"POST",body:JSON.stringify(n),headers:{"Content-type":"application/json; charset=UTF-8",Authorization:"Bearer ".concat(s)}});case 3:return a=t.sent,t.next=6,a.json();case 6:"payment successfully received!"===(a=t.sent).message&&(B(),e.push("/thank-you-payment"));case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),prefill:{name:n.name,email:n.email,contact:n.phone},notes:{address:n.address},theme:{color:"#61dafb"}},new window.Razorpay(f).open(),t.next=33;break;case 29:t.prev=29,t.t0=t.catch(13),console.log(t.t0),alert("Make sure to Provide a valid mobile number and cart is not empty");case 33:case"end":return t.stop()}}),t,null,[[13,29]])})))).apply(this,arguments)}return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"check-out ".concat(d()["check-out"]),children:[(0,n.jsxs)("div",{className:d()["checkout-header"],children:[(0,n.jsxs)("button",{className:d()["back-btn"],onClick:function(){return e.back()},children:[(0,n.jsx)(g.G,{icon:k.EyR}),"\xa0Back"]}),(0,n.jsx)("h1",{className:d()["cart-page-header"],children:"Checkout"}),(0,n.jsxs)("div",{className:d()["item-numbers"],children:["You have ",o()," products"]})]}),(0,n.jsxs)("div",{className:"row",children:[(0,n.jsxs)("div",{className:"col-sm-4 "+d()["contact-information"],children:[(0,n.jsx)("h1",{children:"Contact information"}),(0,n.jsx)("div",{className:d()["login-checkout"],children:null!==m&&void 0!==m&&m.email.length?null:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("button",{onClick:function(){C(!0)},className:"rectangle-button ".concat(d()["login-btn"]),children:"Login"}),(0,n.jsx)("p",{className:d()["contact-info-or"],children:"OR"})]})}),(0,n.jsx)("div",{className:d()["cart-form"],children:(0,n.jsx)(b.Z,{onSubmit:q(R),register:I,errors:z,user:m})})]}),(0,n.jsxs)("div",{className:"col-sm-4 pl-xl-4 pr-xl-0 ".concat(d()["pl-xxl-5"]," ").concat(d()["order-summary"]),children:[(0,n.jsx)("div",{className:d()["summary-title"],style:{zIndex:"1",background:"#fff",width:"100%"},children:"Order Summary"}),(0,n.jsx)(_.Z,{})]}),(0,n.jsxs)("div",{className:"col-sm-4 pl-xl-3 ".concat(d()["pl-xxl-5"]," ").concat(d()["payment-details"]),children:[(0,n.jsx)("div",{className:d()["summary-title"],style:{zIndex:"1",background:"#fff",width:"100%"},children:"Payment Details"}),(0,n.jsxs)("div",{className:p()["payment-methods"],children:[(0,n.jsx)("div",{className:p().radio+" radio",children:(0,n.jsxs)("label",{children:[(0,n.jsx)("input",{className:p()["custom-radio"],onChange:function(e){return E(e)},type:"radio",value:"site_visit",name:"mode",checked:250===A}),(0,n.jsx)("h3",{children:"Pay Rs. 250 Schedule a site measurement visit "}),(0,n.jsx)("div",{className:p().des,children:"Our experts will visit your home"})]})}),(0,n.jsx)("div",{className:p().radio+" radio",children:(0,n.jsxs)("label",{children:[(0,n.jsx)("input",{className:p()["custom-radio"],onChange:function(e){return E(e)},type:"radio",value:"3d_visualisation",name:"mode",checked:1e3===A}),(0,n.jsx)("h3",{children:"Pay Rs. 1000 Order 3D Visualisation"}),(0,n.jsx)("div",{className:p().des,children:"Our designers will contact you and create a customised 3D view"})]})}),(0,n.jsx)("div",{className:p().radio+" radio",children:(0,n.jsxs)("label",{children:[(0,n.jsx)("input",{className:p()["custom-radio"],onChange:function(e){return E(e)},type:"radio",value:"half",name:"mode",checked:0!==A&&A===parseInt(r()/2)}),(0,n.jsx)("h3",{children:"Pay 50% project Confirmation Amount"}),(0,n.jsx)("div",{className:p().des,children:"Rest on product delivery and installation"})]})}),(0,n.jsx)("div",{className:p().radio+" radio",children:(0,n.jsxs)("label",{children:[(0,n.jsx)("input",{className:p()["custom-radio"],onChange:function(e){return E(e)},type:"radio",value:"full",name:"mode",checked:0!==A&&A===parseInt(.95*r())}),(0,n.jsx)("h3",{children:"Full Payment"}),(0,n.jsxs)("div",{className:p().des,children:["Get 5% discount ",(0,n.jsx)("br",{})," 1 FREE maintenance ",(0,n.jsx)("br",{})," Expedited delivery & installation ",(0,n.jsx)("br",{})," All products comes with cloudforest",(0,n.jsx)("br",{})," Standard warranty",(0,n.jsx)("br",{})," Complete Refund on Cancellation"]})]})})]})]})]})]}),(0,n.jsx)(N,{amountToPay:A,onPayButtonClicked:function(){return M.apply(this,arguments)},getCartTotal:r,getDeliveryTotal:c})]})},O=function(){return(0,n.jsxs)("div",{className:"checkoutPage",children:[(0,n.jsx)(a.default,{}),(0,n.jsx)(s.default,{}),(0,n.jsx)(C,{}),(0,n.jsx)(o.default,{})]})}},8191:function(e,t,r){"use strict";r.d(t,{S:function(){return n},z:function(){return a}});var n=function(e){var t=e.src,r=e.width,n=e.quality,a=t.substring(t.indexOf(".com/")+5,t.lastIndexOf("?"));return"https://cdn.mycloudforest.com/".concat(a,"?w=").concat(r,"&q=").concat(n||75)},a=function(e){var t=e.src,r=e.width,n=e.quality;return"https://cdn.mycloudforest.com/".concat(t,"?w=").concat(r,"&q=").concat(n||75)}},354:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/checkout",function(){return r(6140)}])},3574:function(e){e.exports={cart:"Cart_cart__3cfub","cart-items":"Cart_cart-items__1H6hk",preview:"Cart_preview__I9l2c","input-group":"Cart_input-group__1wGNk","input-group-btn":"Cart_input-group-btn__IsfVb",item:"Cart_item__Frnvs",details:"Cart_details__2Inwd",itemPrice:"Cart_itemPrice__3rt08",itemName:"Cart_itemName__3F3vn",addition:"Cart_addition__38nkO",minus:"Cart_minus__3MMFD","input-number":"Cart_input-number__1UsVA"}},3117:function(e){e.exports={"check-out":"CheckOut_check-out__3rlJp","cart-page-header":"CheckOut_cart-page-header__2x5yZ","back-btn":"CheckOut_back-btn__1QI5n","checkout-header":"CheckOut_checkout-header__wSRPy","item-numbers":"CheckOut_item-numbers__1iwtb","contact-information":"CheckOut_contact-information__1ULmj","form-group":"CheckOut_form-group__31jcM","login-btn":"CheckOut_login-btn__3Hp1s","cart-form":"CheckOut_cart-form__3tbA-","form-control":"CheckOut_form-control__3Fov0","summary-title":"CheckOut_summary-title__3AD2m",cart:"CheckOut_cart__2uHOE","payment-methods":"CheckOut_payment-methods___rEQn","cart-items":"CheckOut_cart-items__Na1Or",details:"CheckOut_details__1vT1J",item:"CheckOut_item__z6HqS","coupon-box":"CheckOut_coupon-box__19DgK","apply-button":"CheckOut_apply-button__2Rqey","contact-info-or":"CheckOut_contact-info-or__37kSf","pl-xxl-5":"CheckOut_pl-xxl-5__Y2UOl","order-summary":"CheckOut_order-summary__1Mm6z","payment-details":"CheckOut_payment-details__2okw1","login-checkout":"CheckOut_login-checkout__1_aNV",preview:"CheckOut_preview__3BkZx","input-group":"CheckOut_input-group__5078U","input-group-btn":"CheckOut_input-group-btn__2AzLQ",itemPrice:"CheckOut_itemPrice__lr8OU",minus:"CheckOut_minus__2cUsP","input-number":"CheckOut_input-number__3cCo4","final-checkout":"CheckOut_final-checkout__U6koY","paynow-button":"CheckOut_paynow-button__320K_","total-sum":"CheckOut_total-sum__3sLLg"}},6569:function(e){e.exports={"form-group":"ProfileAddressForm_form-group__1Lolb","form-control":"ProfileAddressForm_form-control__15AF9"}}},function(e){e.O(0,[9774,7112,8523,9351,3346,7734,3759,1338,9187,8626],(function(){return t=354,e(e.s=t);var t}));var t=e.O();_N_E=t}]);