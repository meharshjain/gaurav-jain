(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9187],{2327:function(e,t,n){"use strict";n.d(t,{Z:function(){return v}});var r=n(5893),i=n(7),o=n(6156),a=n(7757),s=n.n(a),c=n(2137),l=n(548),d=n(5005),u=n(2283),f=n(5269),h=n(7294);function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function g(e){var t,n,i=(0,u.cI)(),o=i.register,a=i.handleSubmit,p=i.setError,g=i.clearErrors,v=i.formState.errors,y=(0,h.useContext)(f.S),b=y.setUser,w=y.setShowLoginDialog,j=(0,h.useState)(!1),x=j[0],_=j[1],O=(0,h.useState)(!1),k=O[0],S=O[1];(0,h.useEffect)((function(){g()}),[x]);var Z=function(){var e=(0,c.Z)(s().mark((function e(t){var n,r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/api/v1/accounts/login/",{method:"POST",body:JSON.stringify(t),headers:{"Content-type":"application/json; charset=UTF-8"}});case 3:if(200!==(n=e.sent).status){e.next=15;break}return e.next=7,n.json();case 7:return r=e.sent,localStorage.setItem("cloudforest-refresh-token",r.refresh),localStorage.setItem("cloudforest-access-token",r.access),b(r.user),w(!1),e.abrupt("return");case 15:if(400!==n.status){e.next=19;break}return n.json(),p("password",{type:"manual",message:"The email or password is incorrect."}),e.abrupt("return");case 19:e.next=24;break;case 21:e.prev=21,e.t0=e.catch(0),console.log(e.t0);case 24:p("password",{type:"manual",message:"There was a problem submitting this request. Retry later."});case 25:case"end":return e.stop()}}),e,null,[[0,21]])})));return function(t){return e.apply(this,arguments)}}(),P=function(){var e=(0,c.Z)(s().mark((function e(t){var n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/api/v1/accounts/reset-password-request/",{method:"POST",body:JSON.stringify(t),headers:{"Content-type":"application/json; charset=UTF-8"}});case 3:if(200!==(n=e.sent).status){e.next=10;break}return e.next=7,n.json();case 7:return e.sent,S(!0),e.abrupt("return");case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0);case 15:p("email",{type:"manual",message:"There was a problem submitting this request. Retry later."});case 16:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}(),C=function(){var e=(0,c.Z)(s().mark((function e(t){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log(t),x?P(t):Z(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return k?(0,r.jsx)("p",{children:"We have mailed you instructions to reset your password."}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(l.Z,{className:"login-form",onSubmit:a(C),children:[(0,r.jsxs)(l.Z.Group,{controlId:"email",children:[(0,r.jsx)(l.Z.Label,{children:"Email"}),(0,r.jsx)(l.Z.Control,m(m({type:"email",placeholder:"Enter Email"},o("email",{required:{value:!0,message:"This field is required"}})),{},{isInvalid:!(null===v||void 0===v||!v.email)})),(0,r.jsx)(l.Z.Control.Feedback,{type:"invalid",children:null===v||void 0===v||null===(t=v.email)||void 0===t?void 0:t.message})]}),x?null:(0,r.jsxs)(l.Z.Group,{controlId:"password",children:[(0,r.jsx)(l.Z.Label,{children:"Password"}),(0,r.jsx)(l.Z.Control,m({type:"password",placeholder:"Enter Password",isInvalid:!(null===v||void 0===v||!v.password)},o("password",{required:{value:!0,message:"This field is required"}}))),(0,r.jsx)(l.Z.Control.Feedback,{type:"invalid",children:null===v||void 0===v||null===(n=v.password)||void 0===n?void 0:n.message})]}),(0,r.jsx)(d.Z,{className:"rectangle-button",variant:"primary",type:"submit",children:x?"Send Reset Link":"Login"})]}),x?(0,r.jsx)("p",{className:"mt-3",children:(0,r.jsx)("a",{href:"#",onClick:function(){return _(!1)},children:"Back to Login Form"})}):(0,r.jsx)("p",{className:"mt-3",children:(0,r.jsx)("a",{href:"#",onClick:function(){return _(!0)},children:"Forgot Password?"})})]})}function v(e){var t=(0,h.useContext)(f.S),n=t.showLoginDialog,o=t.setShowLoginDialog;return(0,r.jsxs)(i.Z,{show:n,onHide:function(){return o(!1)},children:[(0,r.jsx)(i.Z.Header,{closeButton:!0,children:(0,r.jsx)(i.Z.Title,{children:"Login"})}),(0,r.jsx)(i.Z.Body,{children:(0,r.jsx)(g,{})})]})}},9187:function(e,t,n){"use strict";n.r(t);var r=n(5893),i=n(5988),o=n(1664),a=n(1330),s=n(5602),c=n(9370),l=n(3637),d=n(7625),u=n(9862),f=n(7294),h=n(5269),p=n(2327),m=n(1417);t.default=function(){var e=(0,u.Z)().getCartSize,t=(0,f.useContext)(h.S),n=t.user,g=t.setShowLoginDialog,v=!1;return null!==n&&void 0!==n&&n.email&&(v=!0),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.Z,{className:"top-navbar",collapseOnSelect:!0,expand:"xl",variant:"white",fixed:"top",children:(0,r.jsxs)("div",{className:"header-container-fluid",children:[(0,r.jsxs)("div",{className:"navbar-header",children:[(0,r.jsx)(s.Z.Brand,{href:"https://www.facebook.com/mycloudforest","aria-label":"facebook",children:(0,r.jsx)(d.G,{style:{width:"10.8px"},icon:m.AYu,alt:"facebook"})}),(0,r.jsx)(s.Z.Brand,{href:"https://linkedin.com/cldforest","aria-label":"twitter",children:(0,r.jsx)(d.G,{style:{width:"17.22px"},icon:m.mdU,alt:"twitter"})}),(0,r.jsx)(s.Z.Brand,{href:"https://www.linkedin.com/company/mycloudforest","aria-label":"linkedin",children:(0,r.jsx)(d.G,{style:{width:"15.94px"},icon:m.hwn,alt:"linkedin"})}),(0,r.jsx)(s.Z.Brand,{href:"https://wa.me/917349250253","aria-label":"Whatsapp",children:(0,r.jsx)(d.G,{style:{width:"15.94px"},icon:m.VHX,alt:"Whatsapp"})}),(0,r.jsx)(s.Z.Brand,{href:"skype:live:3bb0ef8a4319c814?chat","aria-label":"skype",children:(0,r.jsx)(d.G,{style:{width:"15.94px"},icon:m._ei,alt:"skype"})})]}),(0,r.jsxs)(c.Z,{className:"right-header",children:[(0,r.jsx)(c.Z.Link,{href:"tel:+917676131132","aria-label":"linkedin",children:"+91-7676131132"}),(0,r.jsxs)(c.Z.Link,{href:"https://wa.me/917349250253","aria-label":"Whatsapp",children:[(0,r.jsx)(d.G,{style:{width:"15.94px"},icon:m.VHX,alt:"Whatsapp"})," ","+91-73492-50253"]}),(0,r.jsx)(o.default,{href:"/how-it-works",passHref:!0,children:(0,r.jsx)(c.Z.Link,{children:"How it works"})}),v?(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(l.Z,{title:"Welcome "+n.name,id:"basic-nav-dropdown",children:(0,r.jsx)(o.default,{href:"/logout",passHref:!0,children:(0,r.jsx)(l.Z.Item,{children:"Logout"})})})}):(0,r.jsxs)(c.Z.Link,{href:"#",onClick:function(){g(!0)},children:[(0,r.jsx)(a.Z,{src:"/img/Profile-avatar.png",alt:"",width:21,height:21}),"Login"]}),(0,r.jsx)(o.default,{href:"/checkout",passHref:!0,children:(0,r.jsxs)(c.Z.Link,{className:"cart-icon-header",children:[(0,r.jsx)("span",{id:"totalCount",className:"jsx-381925704",children:e()}),(0,r.jsx)(i.default,{id:"381925704",children:[".cart-icon-header{position:relative;background-image:url(/img/header-icon.png);background-position:-18px 17px;background-repeat:no-repeat;width:40px;height:40px;display:inline-block;vertical-align:middle;}"]})]})})]})]})}),(0,r.jsx)(p.Z,{})]})}},1268:function(e,t,n){"use strict";n.d(t,{A9:function(){return d},Zl:function(){return f},p3:function(){return u}});var r=n(5893),i=n(6156),o=n(7294),a=n(361),s=n.n(a);function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var d=o.createContext([{},function(){}]),u={items:[],dimensions:{width:5,length:7},default_balcony_dimensions:{width:0,length:0}},f=function(e){var t=(0,o.useState)({cart:s()(u),selectedCategory:"plants"}),n=t[0],i=t[1];return(0,o.useEffect)((function(){i((function(e){return l(l({},e),{},{cart:localStorage.getItem("cart-v2")?JSON.parse(localStorage.getItem("cart-v2")):s()(u)})}))}),[]),(0,r.jsx)(d.Provider,{value:[n,i],children:e.children})}},9862:function(e,t,n){"use strict";var r=n(6156),i=n(7294),o=n(1268),a=n(361),s=n.n(a);function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.Z=function(){var e=(0,i.useContext)(o.A9),t=e[0],n=e[1],r=function(e,r,i){console.log("In addOrRemoveItem");var o=s()(t.cart),a=o.items,c=0,d=0;if(i){var u=o.items.find((function(e){return e.name===i}));if(!u)return!1;a=u.items,c=u.width,d=u.length}else c=o.dimensions.width,d=o.dimensions.length;var f=a.find((function(t){return t.name===e.name}));if(f)if("remove"===r){if(f.min_count&&f.count===f.min_count)return!1;if(f.count>1)f.count--;else{var h=a.indexOf(f);a.splice(h,1)}}else"add"===r&&f.count++;else{var p={id:e.id,name:e.name,count:1,price:e.price,image:e.images.length>0?e.images[0].image:"",dimension_dependent:e.is_dimension_dependent,length:parseFloat(e.length_in_feet),width:parseFloat(e.width_in_feet),key:e.name};p.dimension_dependent&&(p.balcony_length=d,p.balcony_width=c),a.push(p)}return n((function(e){return l(l({},e),{},{cart:o})})),localStorage.setItem("cart-v2",JSON.stringify(o)),!0},a=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(r){var i=e.items.find((function(e){return e.name===r}));if(!i)return console.log("Group not found"),void console.log(updatedCart);t&&(i.width=t),n&&(i.length=n),i.is_dimension_default=!1,e.default_balcony_dimensions.width=i.width,e.default_balcony_dimensions.length=i.length,console.log("Group width and length set."),console.log(i),console.log(i.items),i.items.forEach((function(e){console.log(e),e.dimension_dependent&&(console.log("Item is dimension dependent"),e.balcony_width=i.width,e.balcony_length=i.length)}))}else t&&(e.dimensions.width=t),n&&(e.dimensions.length=n),e.items.forEach((function(t){!0!==t.isGroup&&t.dimension_dependent&&(t.balcony_width=e.dimensions.width,t.balcony_length=e.dimensions.length)}))},c=function(e,r){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;console.log("Setting dimensions."),console.log(e,r),console.log(i);var o=l({},t.cart);a(o,e,r,i),n((function(e){return l(l({},e),{},{cart:o})})),localStorage.setItem("cart-v2",JSON.stringify(o))},d=function(e){var n=t.cart.items.find((function(t){return t.name===e}));if(!n)return 0;var r=0;return n.items.forEach((function(e){r+=u(e)})),r*n.count},u=function(e){return e.dimension_dependent?1==parseInt(e.width)?e.count*Math.round(parseFloat(e.price)*e.balcony_width*e.balcony_length):e.count*Math.round(parseFloat(e.price)*e.width*e.balcony_length):e.count*e.price},f=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n={id:e.id,count:e.count,product_group:t};return e.dimension_dependent&&(n.width=e.balcony_width,n.length=e.balcony_length),n};return{cart:t.cart,selectedCategory:t.selectedCategory,setCategory:function(e){n((function(t){return l(l({},t),{},{selectedCategory:e})}))},setDimensions:c,clearCart:function(){n((function(e){return l(l({},e),{},{cart:s()(o.p3)})})),localStorage.setItem("cart-v2",JSON.stringify(o.p3))},addBalcony:function(e,r){var i,o=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=s()(t.cart),d=a.items.find((function(t){return t.name===e.name}));if(d&&o){var u=a.items.indexOf(d);a.items.splice(u,1),d=!1}if(d){var f;d.is_dimension_default&&null!==(f=a.default_balcony_dimensions)&&void 0!==f&&f.width&&c(a.default_balcony_dimensions.width,a.default_balcony_dimensions.length,d.name)}else{var h=parseInt(e.width_in_feet),p=parseInt(e.length_in_feet);null!==(i=a.default_balcony_dimensions)&&void 0!==i&&i.width&&(h=a.default_balcony_dimensions.width,p=a.default_balcony_dimensions.length);var m={isGroup:!0,id:e.id,name:e.name,price:0,count:1,confirmed:!0===o,image:e.images.length>0?e.images[0].image:"",length:p,width:h,key:e.name,items:[]};r.length>0&&(m.items=r.map((function(e){var t=e.included_product;return{id:t.id,name:t.name,count:e.quantity,min_count:e.quantity,price:t.price,image:t.images.length>0?t.images[0].image:"",dimension_dependent:t.is_dimension_dependent,length:parseFloat(t.length_in_feet),width:parseFloat(t.width_in_feet),key:t.name,balcony_width:h,balcony_length:p}}))),a.items.push(m),n((function(e){return l(l({},e),{},{cart:a})})),localStorage.setItem("cart-v2",JSON.stringify(a))}},addProduct:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return r(e,"add",t)},removeProduct:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return r(e,"remove",t)},confirmBalcony:function(e){console.log("Confirming balcony.");var r=s()(t.cart),i=r.items.find((function(t){return t.name===e}));console.log(r),i?(i.confirmed=!0,localStorage.setItem("cart-v2",JSON.stringify(r)),console.log("Updating state for confirm status."),n((function(e){return l(l({},e),{},{cart:r})}))):console.log("balcony not found.")},getProductTotal:d,getItemTotal:u,getCartTotal:function(){var e=0;return t.cart.items.forEach((function(t){t.isGroup?t.confirmed&&(e+=d(t.name)):e+=u(t)})),Math.round(1.15*e)},getCartSize:function(){var e=0;return t.cart.items.forEach((function(t){!0===t.isGroup?t.confirmed&&e++:e++})),e},getOrderPayload:function(){var e=[];return t.cart.items.forEach((function(t){if(t.isGroup){if(!t.confirmed)return;t.items.forEach((function(n){e.push(f(n,t.name))}))}else e.push(f(t))})),e},getDeliveryTotal:function(){var e=0;return t.cart.items.forEach((function(t){t.isGroup?t.confirmed&&(e+=d(t.name)):e+=u(t)})),Math.round(.15*e)}}}}}]);